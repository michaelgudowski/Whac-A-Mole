<html>
<head>
	<title>Whack-A-Mole</title>
	<link rel="stylesheet" type="text/css" href="css/css.css"></link>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
</head>
<body>
<script src="/js/jquery.min.js"></script>
<script>
	 
$(document).ready(function () {
    
    function popOut(mole) {
        var moleSpeed = Math.random();
        if (mole.hasClass("chosen")) {
            return;
        } else if (moleSpeed > 2 / 3) {
            mole.addClass("chosen");
            mole.animate({
                top: "-=65px"
            }, 700, function () {
                mole.animate({
                    top: "+=65px"
                }, 160, function () {
                    mole.removeClass("chosen");
                });
            });
        } else if (moleSpeed > 1 / 3) {
            mole.addClass("chosen");
            mole.animate({
                top: "-=65px"
            }, 300, function () {
                mole.animate({
                    top: "+=65px"
                }, 700, function () {
                    mole.removeClass("chosen");
                });
            });
        } else {
            mole.addClass("chosen");
            mole.animate({
                top: "-=65px"
            }, 500, function () {
                mole.animate({
                    top: "+=65px"
                }, 500, function () {
                    mole.removeClass("chosen");
                });
            });
        }
    }
    //Pow! animation on clicking on moles
    var punchElement = document.createElement('audio');
    function punchSound() {
        punchElement.setAttribute('src', 'punch.wav');
        punchElement.setAttribute('autoplay', 'autoplay');

    }

    $("#mole1").on("click", function () {
        punchSound();
        $("#pow1").fadeIn(100);
        $("#pow1").fadeOut(400);
    });
    $("#mole2").on("click", function () {
        punchSound();
        $("#pow2").fadeIn(100);
        $("#pow2").fadeOut(400);
    });
    $("#mole3").on("click", function () {
        punchSound();
        $("#pow3").fadeIn(100);
        $("#pow3").fadeOut(400);
    });
    $("#mole4").on("click", function () {
        punchSound();
        $("#pow4").fadeIn(100);
        $("#pow4").fadeOut(400);
    });
    $("#mole5").on("click", function () {
        punchSound();
        $("#pow5").fadeIn(100);
        $("#pow5").fadeOut(400);
    });
    $("#mole6").on("click", function () {
        punchSound();
        $("#pow6").fadeIn(100);
        $("#pow6").fadeOut(400);
    });
    $("#mole7").on("click", function () {
        punchSound();
        $("#pow7").fadeIn(100);
        $("#pow7").fadeOut(400);
    });
    // $(".molepics").click( function () {
    //     console.log("first");
    //     var is_chosen = $(this).hasClass('chosen');
    //     $(this).removeClass('chosen');
    //     if (is_chosen) {
    //         punchSound();
    //         console.log("click");
    //     }
    // });
    







            // This is the 30 second timer starting to count down
            window.timerInterval = setInterval(function () {
                $('#timer').html(parseInt($('#timer').html()) - 1);
                if ($("#timer").html() <= 1) {
                    $("#timeMessage").dialog().addClass("ui-state-error");
                    $('#losses').html(parseInt($('#losses').html()) + 1);
                    resetAll();
                } else if ($("#timer").html() <= 10) {
                    $("#timer").css("color", "red");
                    $("#timer").css("font-weight", "bold");
                    $("#timer").css("font-size", "16");
                }
            }, 1000);
            window.intervalId = setInterval(function () {
                var randomChoice = Math.random();
                if (randomChoice > 6 / 7) {
                    popOut($("#mole1"));
                } else if (randomChoice > 5 / 7) {
                    popOut($("#mole2"));
                } else if (randomChoice > 4 / 7) {
                    popOut($("#mole3"));
                } else if (randomChoice > 3 / 7) {
                    popOut($("#mole4"));
                } else if (randomChoice > 2 / 7) {
                    popOut($("#mole5"));
                } else if (randomChoice > 1 / 7) {
                    popOut($("#mole6"));
                } else {
                    popOut($("#mole7"));
                }
            }, 600);
            $("#btnStart").html("Stop");
        
    });
                       
</script>

<div class="moles" id="mole1"><img class="molepics" id="mole01" src="images/mole.png" /></div>
<img class="dirtImg" id="dirt1" src="images/dirt.png" />
<div class="moles" id="mole2"><img class="molepics" id="mole02" src="images/mole.png" /></div>
<img class="dirtImg" id="dirt2" src="images/dirt.png" />
<div class="moles" id="mole3"><img class="molepics" id="mole03" src="images/mole.png" /></div>
<img class="dirtImg" id="dirt3" src="images/dirt.png" />
<div class="moles" id="mole4"><img class="molepics" id="mole04" src="images/mole.png" /></div>
<img class="dirtImg" id="dirt4" src="images/dirt.png" />
<div class="moles" id="mole5"><img class="molepics" id="mole05" src="images/mole.png" /></div>
<img class="dirtImg" id="dirt5" src="images/dirt.png" />
<div class="moles" id="mole6"><img class="molepics" id="mole06" src="images/mole.png" /></div>
<img class="dirtImg" id="dirt6" src="images/dirt.png" />
<div class="moles" id="mole7"><img class="molepics" id="mole07" src="images/mole.png" /></div>
<img class="dirtImg" id="dirt7" src="images/dirt.png" />


</body>
</html>